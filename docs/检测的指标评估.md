# 检测的指标评估

    检测的评估遵循两个基本匹配原则：1. 匹配的IOU数值大于阈值；2. box的类别相同。从这两个原则中，我们希望得到模型预测和数据集GT间的性能指标，如类别的精确率、召回率、AP@50、AP@50-95，整体的精确率、召回率、AP@50、AP@50-95。进一步我们可能会希望得到预测的混淆分布，以及每一类预测参数的最优配置。本文将分别就这个管线涉及的一些知识进行说明。

## 1. 指标与参数说明

| 指标        | 描述                                  |                            表示                            |
| ----------- | ------------------------------------- | :--------------------------------------------------------: |
| conf        | 模型预测某实例的置信度(可靠性指标)    |        默认所有类别(cls)都是使用这个置信度过滤上报        |
| iou-nms     | 模型对于同一类目标去重的IOU阈值       |                             -                             |
| iou-matches | 预测与标注的IOU匹配阈值               |                             -                             |
| R           | 模型识别出GT实例的比例                |    预测正确的实例数量 / 标记的GT实例数量；$M(R(cls))$    |
| P           | 模型预测中正确实例的占比              | 预测正确的实例数量 / 预测的实例总数；     $M(P(cls))$ |
| AP          | 某一类的平均精确率(Average Precision) |              $\int_{0}^{1} P(conf)d_{conf}$              |
| AP@50       | 在iou-matches=0.5时的AP               |                     $AP(conf=0.50)$                     |
| AP@50-95    | 在iou-matches为0.5～0.95的AP平均值    |              $\Sigma_{0.5}^{0.95} AP(conf)$              |
| AR          | 某一类的平均精确率(Average Recall)    |              $\int_{0}^{1} R(conf)d_{conf}$              |


## 2. 召回率和精确率

关于R、P、AP、AP@50、AP@50-95、AR，我们以YOLO框架ultralytics库为例进行说明。召回率和精确率的计算逻辑(操作上)是一致的，这里以精确率为介绍对象。[详细介绍见 附件2:精确率计算全流程]()。

### 2.1 置信度-IOU匹配矩阵
